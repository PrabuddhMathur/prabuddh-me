{% load wagtailimages_tags %}

{# Base Image Block Template #}
<figure class="
    mx-auto text-center
    {% if value.alignment == 'full' %}w-full{% else %}max-w-4xl{% endif %}
">
    {% image value.image fill-1200x800 as img %}
    {% image value.image width-2400 as full_img %}
    <button 
        class="block cursor-pointer group relative w-full bg-transparent border-0 p-0 blog-gallery-image"
        data-full-url="{{ full_img.url }}"
        data-caption="{{ value.caption|default:'' }}"
        data-alt="{{ value.alt_text|default:value.caption|default:'Image' }}"
        aria-label="View full size image">
        <img 
            src="{{ img.url }}" 
            alt="{{ value.alt_text|default:value.caption|default:'Image' }}"
            class="{% if value.alignment == 'full' %}w-full{% else %}max-w-full h-auto mx-auto{% endif %} rounded-lg"
            width="{{ img.width }}"
            height="{{ img.height }}"
        />
    </button>
    
    {% if value.caption %}
        <figcaption class="mt-2 text-sm text-base-content/60">
            {{ value.caption }}
        </figcaption>
    {% endif %}
</figure>
