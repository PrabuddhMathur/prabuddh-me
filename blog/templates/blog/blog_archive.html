{% extends "core/base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block title %}{{ seo_meta.title }}{% endblock %}

{# Breadcrumbs #}
<nav class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4" aria-label="Breadcrumb">
    <ol class="flex items-center gap-2 text-sm text-base-content/60">
        <li><a href="/" class="hover:text-base-content transition-colors">Home</a></li>
        <li><span class="text-base-content/40">/</span></li>
        <li><a href="/blog/" class="hover:text-base-content transition-colors">Blog</a></li>
        {% if tag %}
            <li><span class="text-base-content/40">/</span></li>
            <li class="text-base-content font-medium">{{ tag.name }}</li>
        {% elif year %}
            <li><span class="text-base-content/40">/</span></li>
            <li class="text-base-content font-medium">{{ year }}{% if month %} / {{ month_name }}{% endif %}{% if day %} / {{ day }}{% endif %}</li>
        {% endif %}
    </ol>
</nav>

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    {# Archive Header #}
    <div class="mb-12 max-w-4xl mx-auto space-y-6">
        <div>
            <h1 class="text-3xl lg:text-4xl font-bold text-base-content mb-2">
                {% if archive_type == 'author' %}
                    Posts by {{ author_name }}
                {% elif archive_type == 'tag' %}
                    Posts tagged "{{ tag.name }}"
                {% elif archive_type == 'day' %}
                    Posts from {{ year }}-{{ month|stringformat:"02d" }}-{{ day|stringformat:"02d" }}
                {% elif archive_type == 'month' %}
                    Posts from {{ month_name }} {{ year }}
                {% else %}
                    Posts from {{ year }}
                {% endif %}
            </h1>
            <p class="text-base-content/60">{{ paginator.count }} post{{ paginator.count|pluralize }}</p>
        </div>
    </div>

    {# Blog Posts #}
    {% if posts %}
        <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
            {% for post in posts %}
            {% include "blog/includes/post_card.html" with post=post %}
            {% endfor %}
        </div>

        {# Pagination using component #}
        <div class="max-w-4xl mx-auto">
            {% include "core/components/pagination.html" with page=posts paginator=paginator %}
        </div>
    {% else %}
        <div class="max-w-4xl mx-auto alert alert-info shadow-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span>No blog posts found.</span>
        </div>
    {% endif %}
</div>
{% endblock %}