{% load wagtailcore_tags wagtailimages_tags %}

<article class="card bg-base-200 shadow-lg hover:shadow-xl transition-all duration-300 mb-4 cursor-pointer group" onclick="window.location='{{ post.get_date_url }}'">
    <div class="card-body">
        <div class="flex gap-4">
            {% if post.featured_image %}
            <figure class="flex-shrink-0">
                {% image post.featured_image fill-200x150 as post_img %}
                <img src="{{ post_img.url }}" alt="{{ post.featured_image.title }}" class="w-32 h-24 object-cover rounded-lg">
            </figure>
            {% endif %}
            <div class="flex-1">
                {% if post.featured %}
                <div class="badge badge-accent mb-2">Featured</div>
                {% endif %}
                <h3 class="card-title text-2xl mb-2 group-hover:text-primary transition-colors">
                    {{ post.title }}
                </h3>
                <p class="text-base-content/70 mb-4">{{ post.intro }}</p>
                
                {# Post Meta #}
                <div class="flex flex-wrap gap-3 items-center text-sm text-base-content/60">
                    <a href="{% url 'blog_author_archive' post.author|slugify %}" 
                       class="hover:text-primary transition-colors z-10 relative"
                       onclick="event.stopPropagation()">
                        {{ post.author }}
                    </a>
                    <span>•</span>
                    <time datetime="{{ post.date|date:'Y-m-d' }}">{{ post.date|date:"F j, Y" }}</time>
                    {% if post.estimated_reading_time %}
                    <span>•</span>
                    <span>{{ post.estimated_reading_time }} min read</span>
                    {% endif %}
                </div>
                
                {# Tags #}
                {% if post.tags.all %}
                <div class="flex flex-wrap gap-2 mt-3">
                    {% for tag in post.tags.all %}
                    <a href="{% url 'blog_tag_archive' tag.slug %}" 
                       class="badge badge-sm badge-outline hover:badge-primary transition-colors z-10 relative"
                       onclick="event.stopPropagation()">
                        {{ tag }}
                    </a>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</article>
