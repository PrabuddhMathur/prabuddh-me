{% load wagtailcore_tags wagtailimages_tags %}

<article class="card bg-base-200 shadow-xl hover:shadow-2xl transition-all duration-300 break-inside-avoid cursor-pointer group" onclick="window.location='{{ post.get_date_url }}'">
    {% if post.featured_image %}
    <figure>
        {% image post.featured_image fill-600x400 as post_img %}
        <img src="{{ post_img.url }}" alt="{{ post.featured_image.title }}" class="w-full h-48 object-cover">
    </figure>
    {% endif %}
    <div class="card-body">
        {% if post.featured %}
        <div class="badge badge-accent">Featured</div>
        {% endif %}
        <h3 class="card-title text-xl">
            <span class="group-hover:text-primary transition-colors">
                {{ post.title }}
            </span>
        </h3>
        <p class="text-base-content/70">{{ post.intro|truncatewords:20 }}</p>
        
        {# Post Meta #}
        <div class="flex flex-wrap gap-2 items-center text-sm text-base-content/60 mt-4">
            <a href="{% url 'blog_author_archive' post.author|slugify %}" 
               class="hover:text-primary transition-colors z-10 relative"
               onclick="event.stopPropagation()">
                {{ post.author }}
            </a>
            <span>•</span>
            <time datetime="{{ post.date|date:'Y-m-d' }}">{{ post.date|date:"M j, Y" }}</time>
            {% if post.estimated_reading_time %}
            <span>•</span>
            <span>{{ post.estimated_reading_time }} min</span>
            {% endif %}
        </div>
        
        {# Tags #}
        {% if post.tags.all %}
        <div class="flex flex-wrap gap-1 mt-2">
            {% for tag in post.tags.all|slice:":3" %}
            <a href="{% url 'blog_tag_archive' tag.slug %}" 
               class="badge badge-sm badge-outline hover:badge-primary transition-colors z-10 relative"
               onclick="event.stopPropagation()">
                {{ tag }}
            </a>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="card-actions justify-end mt-4">
            <span class="btn btn-primary btn-sm pointer-events-none">Read More</span>
        </div>
    </div>
</article>
