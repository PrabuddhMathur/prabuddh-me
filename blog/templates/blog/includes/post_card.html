{% load wagtailcore_tags wagtailimages_tags %}

<article class="group cursor-pointer border border-base-200 hover:border-base-300 transition-colors" onclick="window.location='{{ post.get_date_url }}'">
    {% if post.featured_image %}
    <div class="overflow-hidden">
        {% image post.featured_image fill-600x400 as post_img %}
        <img src="{{ post_img.url }}" alt="{{ post.featured_image.title }}" class="w-full h-48 object-cover group-hover:opacity-90 transition-opacity">
    </div>
    {% endif %}
    <div class="p-6">
        {% if post.featured %}
        <div class="inline-block text-xs font-semibold uppercase tracking-wider text-base-content/60 mb-2">Featured</div>
        {% endif %}
        <h2 class="text-xl font-semibold mb-2 group-hover:text-base-content/70 transition-colors">
            {{ post.title }}
        </h2>
        <p class="text-base-content/60 mb-4 leading-relaxed">{{ post.intro|truncatewords:20 }}</p>
        
        {# Post Meta #}
        <div class="flex flex-wrap gap-3 items-center text-sm text-base-content/50 mb-3">
            <span>{{ settings.core.AuthorSettings.author_name }}</span>
            <span>•</span>
            <time datetime="{{ post.date|date:'Y-m-d' }}">{{ post.date|date:"M j, Y" }}</time>
            {% if post.estimated_reading_time %}
            <span>•</span>
            <span>{{ post.estimated_reading_time }} min</span>
            {% endif %}
        </div>
        
        {# Tags #}
        {% if post.tags.all %}
        <div class="flex flex-wrap gap-2">
            {% for tag in post.tags.all|slice:":3" %}
            <a href="{% url 'blog_tag_archive' tag.slug %}" 
               class="text-xs px-2 py-1 border border-base-300 hover:border-base-content hover:text-base-content transition-colors relative z-10"
               onclick="event.stopPropagation()">
                {{ tag }}
            </a>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</article>
