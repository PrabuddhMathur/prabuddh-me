{% load wagtailcore_tags wagtailimages_tags %}

<article class="relative card bg-base-100 shadow-md hover:shadow-lg transition-shadow duration-300">
    <a href="{{ post.get_date_url }}" class="absolute inset-0" aria-label="Read {{ post.title }}"></a>
    {% if post.featured_image %}
    <figure class="aspect-video overflow-hidden">
        {% image post.featured_image fill-800x450 as post_img %}
        <img src="{{ post_img.url }}" alt="{{ post.featured_image.title }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
    </figure>
    {% endif %}
    
    <div class="card-body p-6 space-y-4">
        {% if post.featured %}
        <div class="badge badge-primary badge-sm">Featured</div>
        {% endif %}
        
        <h2 class="card-title text-xl font-semibold hover:text-primary transition-colors">
            {{ post.title }}
        </h2>
        
        {# Post Meta using core component #}
        {% include "core/components/post-meta.html" with post=post %}
        
        {# Intro excerpt with read more - fallback to body text if intro is empty #}
        {% if post.intro %}
        <p class="text-base-content/80 line-clamp-3 leading-relaxed">
            {{ post.intro }}
        </p>
        {% elif post.body %}
        <p class="text-base-content/80 line-clamp-3 leading-relaxed">
            {{ post.body|striptags|truncatewords:25 }}
        </p>
        {% endif %}
        
        {# Tags using core component #}
        {% if post.tags.all %}
            {% include "core/components/post-tags.html" with post=post max_tags=3 show_inline=True %}
        {% endif %}
    </div>
</article>
